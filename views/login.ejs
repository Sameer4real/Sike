<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
        />
        <link
          rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
          integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu"
          crossorigin="anonymous"
        />
        <link rel="stylesheet" href="/css/home.css" />
        <link rel="stylesheet" href="/css/index.css" />
    
        <title>Sike | <%= title %></title>
      </head>
<body>
    <div class="video-container video">
        <video autoplay muted>
          <source src="https://firebasestorage.googleapis.com/v0/b/sike-c9332.appspot.com/o/forever.mp4?alt=media&token=14f0f1fd-847e-47f6-a872-b222767066cc" type="video/mp4" />
        </video>
      </div>

      
      <div id="loginDiv" class="container">
        <form
          method="POST"
          id="form"
          autocomplete="off"
          class="signupForm"
        >
          <h2 style="color: #8e44ad; opacity: 0.5">LogIn</h2>
          <div class="form-control">
            <label for="username">Username</label>
            <input type="text" name="username" id="username" required/>
  
            <small>Error message</small>
          </div>
          <div class="form-control">
            <label for="username">Email</label>
            <input type="email" name="email" id="email" required />
  
            <small>Error message</small>
          </div>
          <div class="form-control">
            <label for="username">Password</label>
            <input type="password" name="password" id="password" required/>
            <small>Error message</small>
          </div>
  
          <button class="button" type="submit">LogIn</button>
          <% if (success) { %>
            <div
              class="form-control"
              style="margin-top: 10px; color: white"
              id="success_message"
            >
              Inccorect email address...
            </div>
            <% } %>
            <% if (fax) { %>
              <div
                class="form-control"
                style="margin-top: 10px; color: white"
                id="success_message"
              >
                Inccorect password...
              </div>
              <% } %>
          <p style="color: purple; opacity: 0.5">
            You don't have an account? <a id="a2" href="/">Register</a>
          </p>
        </form>
    </div>
   

    <script>
        const form = document.getElementById("form");
        const username = document.getElementById("username");
        const email = document.getElementById("email");
        const password = document.getElementById("password");
  
        form.addEventListener("submit", (e) => {
          if (status.value != "") {
          alert(status.text());
        }
          checkInputs();
        });
    
        function checkInputs() {
          // trim to remove the whitespaces
          const usernameValue = username.value.trim();
          const emailValue = email.value.trim();
          const passwordValue = password.value.trim();
  
          if (emailValue === "") {
            setErrorFor(email, "Email cannot be blank");
          } else if (!isEmail(emailValue)) {
            setErrorFor(email, "Not a valid email");
          } else {
            setSuccessFor(email);
          }
          if (passwordValue === "") {
            setErrorFor(password, "Password cannot be blank");
          }
  
          if (usernameValue === "") {
            setErrorFor(username, "Username cannot be blank");
          } else if (usernameValue === "admin") {
            if (passwordValue === "admin") {
              if (emailValue !== "") {
                setSuccessFor(username);
                
              } else {
                setErrorFor(emai, "Email cannot be blank");
              }
            } else if (passwordValue === "") {
              setErrorFor(password, "Password cannot be blank");
            } else {
              setErrorFor(password, "Inccorect Password");
            }
          } else if (usernameValue === "sameer") {
            if (passwordValue === "sameer") {
              if (emailValue !== "") {
                setSuccessFor(username);
                
              } else {
                setErrorFor(emai, "Email cannot be blank");
              }
            } else if (passwordValue === "") {
              setErrorFor(password, "Password cannot be blank");
            } else {
              setErrorFor(password, "Incorrect Password");
            }
          } else {
            setErrorFor(username, "You are not a memeber");
          }
        }
  
        function setErrorFor(input, message) {
          const formControl = input.parentElement;
          const small = formControl.querySelector("small");
          formControl.className = "form-control error";
          small.innerText = message;
        }
  
        function setSuccessFor(input) {
          const formControl = input.parentElement;
          formControl.className = "form-control success";
        }
  
        function isEmail(email) {
          return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(
            email
          );
        }
      </script>
      </body>
</body>
</html>